[2026-02-15 11:12:42] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:16:31] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:16:34] DEBUG AUTH: main.py loaded
[2026-02-15 11:16:58] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:17:01] DEBUG AUTH: main.py loaded
[2026-02-15 11:17:24] DEBUG MIDDLEWARE: Request GET /api/v1/debug/auth
[2026-02-15 11:17:24] DEBUG MIDDLEWARE: Skipping auth for /api/v1/debug/auth
[2026-02-15 11:17:24] DEBUG AUTH: Diagnostic route hit
[2026-02-15 11:18:14] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-15 11:18:14] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:18:14] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:18:14] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:18:14] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:18:35] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:18:35] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:18:35] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:18:38] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:18:38] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:18:38] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:18:39] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/users/me/tasks/stats
[2026-02-15 11:18:39] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:18:39] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:18:39] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:18:39] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:18:46] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:18:46] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:18:46] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:19:13] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-15 11:19:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:19:13] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:19:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:19:13] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:19:13] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:19:13] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:19:14] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Not Found
[2026-02-15 11:19:14] AUTO-PROVISION: Creating new user: user_user_39N@clerk.dev (user_39NyvTMSW5d1Yeo98ks5shJbNvH)
[2026-02-15 11:19:15] DEBUG AUTH: UNEXPECTED ERROR: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 14... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO users (email, first_name, last_name, is_active, id, password_hash, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITHOUT TIME ZONE, $8::TIMESTAMP WITHOUT TIME ZONE)]
[parameters: ('user_user_39N@clerk.dev', 'User', '', True, 'user_39NyvTMSW5d1Yeo98ks5shJbNvH', None, datetime.datetime(2026, 2, 15, 6, 19, 14, 336180, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 2, 15, 6, 19, 14, 336180, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 251, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 153, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/codecs/datetime.pyx", line 152, in asyncpg.pgproto.pgproto.timestamp_encode
TypeError: can't subtract offset-naive and offset-aware datetimes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 184, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 14... (can't subtract offset-naive and offset-aware datetimes)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 14... (can't subtract offset-naive and offset-aware datetimes)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 168, in get_current_user
    await db.commit()
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 14... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO users (email, first_name, last_name, is_active, id, password_hash, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITHOUT TIME ZONE, $8::TIMESTAMP WITHOUT TIME ZONE)]
[parameters: ('user_user_39N@clerk.dev', 'User', '', True, 'user_39NyvTMSW5d1Yeo98ks5shJbNvH', None, datetime.datetime(2026, 2, 15, 6, 19, 14, 336180, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 2, 15, 6, 19, 14, 336180, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)

[2026-02-15 11:19:23] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:19:23] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:19:23] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:19:23] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:19:23] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:19:24] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Not Found
[2026-02-15 11:19:24] AUTO-PROVISION: Creating new user: user_user_39N@clerk.dev (user_39NyvTMSW5d1Yeo98ks5shJbNvH)
[2026-02-15 11:19:24] DEBUG AUTH: UNEXPECTED ERROR: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 24... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO users (email, first_name, last_name, is_active, id, password_hash, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITHOUT TIME ZONE, $8::TIMESTAMP WITHOUT TIME ZONE)]
[parameters: ('user_user_39N@clerk.dev', 'User', '', True, 'user_39NyvTMSW5d1Yeo98ks5shJbNvH', None, datetime.datetime(2026, 2, 15, 6, 19, 24, 241917, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 2, 15, 6, 19, 24, 241917, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 251, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 153, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/codecs/datetime.pyx", line 152, in asyncpg.pgproto.pgproto.timestamp_encode
TypeError: can't subtract offset-naive and offset-aware datetimes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 184, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 24... (can't subtract offset-naive and offset-aware datetimes)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 24... (can't subtract offset-naive and offset-aware datetimes)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 168, in get_current_user
    await db.commit()
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 24... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO users (email, first_name, last_name, is_active, id, password_hash, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITHOUT TIME ZONE, $8::TIMESTAMP WITHOUT TIME ZONE)]
[parameters: ('user_user_39N@clerk.dev', 'User', '', True, 'user_39NyvTMSW5d1Yeo98ks5shJbNvH', None, datetime.datetime(2026, 2, 15, 6, 19, 24, 241917, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 2, 15, 6, 19, 24, 241917, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)

[2026-02-15 11:19:30] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:19:30] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:19:30] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:19:30] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:19:30] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:19:31] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Not Found
[2026-02-15 11:19:31] AUTO-PROVISION: Creating new user: user_user_39N@clerk.dev (user_39NyvTMSW5d1Yeo98ks5shJbNvH)
[2026-02-15 11:19:31] DEBUG AUTH: UNEXPECTED ERROR: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 31... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO users (email, first_name, last_name, is_active, id, password_hash, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITHOUT TIME ZONE, $8::TIMESTAMP WITHOUT TIME ZONE)]
[parameters: ('user_user_39N@clerk.dev', 'User', '', True, 'user_39NyvTMSW5d1Yeo98ks5shJbNvH', None, datetime.datetime(2026, 2, 15, 6, 19, 31, 593242, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 2, 15, 6, 19, 31, 593242, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 251, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 153, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/codecs/datetime.pyx", line 152, in asyncpg.pgproto.pgproto.timestamp_encode
TypeError: can't subtract offset-naive and offset-aware datetimes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 184, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 31... (can't subtract offset-naive and offset-aware datetimes)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 31... (can't subtract offset-naive and offset-aware datetimes)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 168, in get_current_user
    await db.commit()
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 2030, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 1311, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 1286, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4331, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4466, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 4427, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $7: datetime.datetime(2026, 2, 15, 6, 19, 31... (can't subtract offset-naive and offset-aware datetimes)
[SQL: INSERT INTO users (email, first_name, last_name, is_active, id, password_hash, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::VARCHAR, $4::BOOLEAN, $5::VARCHAR, $6::VARCHAR, $7::TIMESTAMP WITHOUT TIME ZONE, $8::TIMESTAMP WITHOUT TIME ZONE)]
[parameters: ('user_user_39N@clerk.dev', 'User', '', True, 'user_39NyvTMSW5d1Yeo98ks5shJbNvH', None, datetime.datetime(2026, 2, 15, 6, 19, 31, 593242, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 2, 15, 6, 19, 31, 593242, tzinfo=datetime.timezone.utc))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)

[2026-02-15 11:20:14] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:20:17] DEBUG AUTH: main.py loaded
[2026-02-15 11:20:29] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:20:32] DEBUG AUTH: main.py loaded
[2026-02-15 11:21:00] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:21:00] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:21:00] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:21:09] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:21:09] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:21:09] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:21:25] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:21:25] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:21:25] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:21:25] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:21:25] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:21:26] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Not Found
[2026-02-15 11:21:26] AUTO-PROVISION: Creating new user: user_user_39N@clerk.dev (user_39NyvTMSW5d1Yeo98ks5shJbNvH)
[2026-02-15 11:21:29] AUTO-PROVISION: Success for user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:22:49] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:22:52] DEBUG AUTH: main.py loaded
[2026-02-15 11:23:03] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:23:06] DEBUG AUTH: main.py loaded
[2026-02-15 11:23:36] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:23:39] DEBUG AUTH: main.py loaded
[2026-02-15 11:23:49] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:23:52] DEBUG AUTH: main.py loaded
[2026-02-15 11:24:10] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:24:10] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:24:10] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:24:16] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:24:16] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:24:16] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:24:32] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:24:32] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:24:32] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:24:32] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:24:32] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:24:33] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:24:45] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/37539cab-0c50-4ebf-bd32-ffa88f01d906
[2026-02-15 11:24:45] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/37539cab-0c50-4ebf-bd32-ffa88f01d906
[2026-02-15 11:24:45] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/37539cab-0c50-4ebf-bd32-ffa88f01d906
[2026-02-15 11:24:45] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/37539cab-0c50-4ebf-bd32-ffa88f01d906
[2026-02-15 11:24:45] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:24:45] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:24:45] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:24:47] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:25:25] DEBUG MIDDLEWARE: Request PUT /api/v1/tasks/37539cab-0c50-4ebf-bd32-ffa88f01d906
[2026-02-15 11:25:25] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/37539cab-0c50-4ebf-bd32-ffa88f01d906
[2026-02-15 11:25:25] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:25:25] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:25:25] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:25:27] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:29:27] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-15 11:29:30] DEBUG AUTH: main.py loaded
[2026-02-15 11:29:58] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-15 11:29:58] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:29:58] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:29:58] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:29:58] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:30:04] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/users/me/tasks/stats
[2026-02-15 11:30:04] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:30:04] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:30:04] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:30:04] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:30:13] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-15 11:30:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:30:13] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:30:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:30:13] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:30:13] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:30:13] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:30:14] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:30:24] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/974de426-81b4-4a03-ab1c-a2c699ac222c
[2026-02-15 11:30:24] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/974de426-81b4-4a03-ab1c-a2c699ac222c
[2026-02-15 11:30:24] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/974de426-81b4-4a03-ab1c-a2c699ac222c
[2026-02-15 11:30:24] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/974de426-81b4-4a03-ab1c-a2c699ac222c
[2026-02-15 11:30:24] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:30:24] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:30:24] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:30:26] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:30:26] DEBUG TASK: DELETE /tasks/974de426-81b4-4a03-ab1c-a2c699ac222c for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:30:26] DEBUG TASK: DELETE 404 for 974de426-81b4-4a03-ab1c-a2c699ac222c
[2026-02-15 11:30:52] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:30:52] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:30:52] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:30:56] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:30:56] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:30:56] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:30:56] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:30:56] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:30:56] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:31:00] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:31:00] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:31:00] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:31:03] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:31:03] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:31:03] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:31:03] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:31:03] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:05] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:31:15] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:15] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:15] DEBUG MIDDLEWARE: Request PUT /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:15] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:15] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:31:15] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:31:15] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:17] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:31:17] DEBUG TASK: PUT /tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77 for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:30] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:30] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:30] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:31:30] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:31:30] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:32] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:31:32] DEBUG TASK: DELETE /tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77 for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:36] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:36] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:36] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:36] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:36] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:31:38] DEBUG TASK: DELETE /tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77 for user user_test_123
[2026-02-15 11:31:38] DEBUG MIDDLEWARE: Request PATCH /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:38] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:38] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:31:38] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:31:38] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:38] DEBUG TASK: DELETE 404 for e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:39] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:31:42] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:42] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:42] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:31:42] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:31:42] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:43] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:31:43] DEBUG TASK: DELETE /tasks/e7faa3b6-b566-4d68-9473-a3d42c705b77 for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:44] DEBUG TASK: DELETE 404 for e7faa3b6-b566-4d68-9473-a3d42c705b77
[2026-02-15 11:31:56] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/chat
[2026-02-15 11:31:56] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-15 11:31:56] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-15 11:31:56] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-15 11:31:56] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:31:56] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:31:56] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:31:58] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:36:13] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:36:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:36:13] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:36:17] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-15 11:36:17] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:36:17] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:36:17] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:36:17] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:36:17] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:36:24] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-15 11:36:24] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-15 11:36:24] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:36:24] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:36:24] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:36:26] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:36:27] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-15 11:36:27] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-15 11:36:28] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:36:30] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:30] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:30] DEBUG MIDDLEWARE: Request PATCH /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:30] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:30] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:36:30] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:36:30] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:36:32] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:36:34] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:34] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:34] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:36:34] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:36:34] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:36:35] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:35] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:35] DEBUG MIDDLEWARE: Request PATCH /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:35] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:35] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:36:36] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-15 11:36:36] DEBUG TASK: DELETE /tasks/d19e8c38-be39-4f80-bc57-600a9e257519 for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:36:40] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:40] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:40] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-15 11:36:42] DEBUG TASK: DELETE /tasks/d19e8c38-be39-4f80-bc57-600a9e257519 for user user_test_123
[2026-02-15 11:36:42] DEBUG TASK: DELETE 404 for d19e8c38-be39-4f80-bc57-600a9e257519
[2026-02-15 11:36:52] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-15 11:36:52] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-15 11:36:52] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-15 11:36:52] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-15 11:36:52] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-15 11:36:53] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 15:43:18] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 15:43:25] DEBUG AUTH: main.py loaded
[2026-02-17 15:46:06] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 15:46:06] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 15:46:06] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 15:46:06] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 15:46:06] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 15:46:14] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/users/me/tasks/stats
[2026-02-17 15:46:14] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 15:46:14] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 15:46:14] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 15:46:14] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 15:46:21] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 15:46:21] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 15:46:21] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-17 15:46:21] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 15:46:21] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 15:46:21] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 15:46:21] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 15:46:23] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 15:46:53] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/chat
[2026-02-17 15:46:53] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 15:46:53] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 15:46:53] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 15:46:53] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 15:46:53] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 15:46:53] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 15:46:58] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 15:47:16] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 15:47:16] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 15:47:16] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 15:47:16] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 15:47:16] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 15:47:21] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 15:47:48] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/3b4a28ea-1534-45c7-ae33-727889f93dfe
[2026-02-17 15:47:48] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/3b4a28ea-1534-45c7-ae33-727889f93dfe
[2026-02-17 15:47:48] DEBUG MIDDLEWARE: Request PATCH /api/v1/tasks/3b4a28ea-1534-45c7-ae33-727889f93dfe
[2026-02-17 15:47:48] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/3b4a28ea-1534-45c7-ae33-727889f93dfe
[2026-02-17 15:47:48] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 15:47:48] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 15:47:48] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 19:40:24] DEBUG AUTH: UNEXPECTED ERROR: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.ConnectionDoesNotExistError'>: connection was closed in the middle of operation
[SQL: SELECT users.email, users.first_name, users.last_name, users.is_active, users.id, users.password_hash, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::VARCHAR]
[parameters: ('user_39NyvTMSW5d1Yeo98ks5shJbNvH',)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\asyncio\selector_events.py", line 984, in _read_ready__get_buffer
    nbytes = self._sock.recv_into(buf)
ConnectionResetError: [WinError 10054] An existing connection was forcibly closed by the remote host

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\asyncpg\prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.ConnectionDoesNotExistError: connection was closed in the middle of operation

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.ConnectionDoesNotExistError'>: connection was closed in the middle of operation

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 145, in get_current_user
    result = await db.execute(select(User).where(User.id == user_id))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 2351, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1419, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\sql\elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\engine\default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.ConnectionDoesNotExistError'>: connection was closed in the middle of operation
[SQL: SELECT users.email, users.first_name, users.last_name, users.is_active, users.id, users.password_hash, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::VARCHAR]
[parameters: ('user_39NyvTMSW5d1Yeo98ks5shJbNvH',)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)

[2026-02-17 19:51:22] DEBUG MIDDLEWARE: Request GET /api/v1/debug/auth
[2026-02-17 19:51:22] DEBUG MIDDLEWARE: Skipping auth for /api/v1/debug/auth
[2026-02-17 19:51:22] DEBUG AUTH: Diagnostic route hit
[2026-02-17 20:07:13] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 20:07:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:07:13] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 20:07:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:07:13] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:07:13] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:07:13] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 20:07:27] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:07:27] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:07:27] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 20:07:27] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/users/me/tasks/stats
[2026-02-17 20:07:27] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:07:27] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:07:27] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:07:27] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 20:07:39] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 20:07:39] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:07:39] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-17 20:07:39] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:07:39] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:07:39] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:07:39] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:07:41] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:07:41] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:07:41] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 20:07:41] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:07:48] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:48] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:48] DEBUG MIDDLEWARE: Request PATCH /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:48] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:48] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:07:48] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:07:48] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:07:51] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:07:55] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:55] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:55] DEBUG MIDDLEWARE: Request PATCH /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:55] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:55] DEBUG AUTH: No token provided, falling back to demo mode
[2026-02-17 20:07:55] DEBUG MIDDLEWARE: Request PUT /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:55] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:07:56] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:07:56] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:07:56] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:08:00] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:08:00] DEBUG TASK: PUT /tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:08:23] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/chat
[2026-02-17 20:08:23] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:08:23] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:08:23] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:08:23] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:08:23] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:08:23] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:08:25] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:11:27] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 20:11:27] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:11:27] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:11:27] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:11:27] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:11:27] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:11:27] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:11:30] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:11:33] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/users/me/tasks/stats
[2026-02-17 20:11:33] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:11:33] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:11:33] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:11:33] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:11:33] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:11:33] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:11:35] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:11:59] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:11:59] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:11:59] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:11:59] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:11:59] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:12:12] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:12:16] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:12:16] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:12:16] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:12:16] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:12:16] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:12:23] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:13:51] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:13:51] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:13:51] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:13:51] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:13:51] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:13:53] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:13:53] DEBUG TASK: DELETE /tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:13:59] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:13:59] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b
[2026-02-17 20:13:59] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:13:59] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:13:59] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:14:01] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:14:01] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:14:01] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:14:01] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:14:01] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:14:02] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:14:02] DEBUG TASK: DELETE /tasks/b838bd7a-bd2c-44ac-bece-ceda63d9bf2b for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:14:03] DEBUG TASK: DELETE 404: Task b838bd7a-bd2c-44ac-bece-ceda63d9bf2b NOT FOUND in database
[2026-02-17 20:14:04] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:14:05] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:14:05] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:14:05] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:14:05] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:14:05] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:14:07] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:14:13] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:14:13] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:14:13] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:14:13] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:14:13] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:14:15] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:16:13] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:16:18] DEBUG AUTH: main.py loaded
[2026-02-17 20:16:29] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:16:34] DEBUG AUTH: main.py loaded
[2026-02-17 20:18:28] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:18:28] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:18:28] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:18:28] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:18:28] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:18:33] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:18:35] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:18:35] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:18:35] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:18:35] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:18:35] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:18:40] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:18:54] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 20:18:54] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:18:54] DEBUG MIDDLEWARE: Request POST /api/v1/tasks
[2026-02-17 20:18:54] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:18:54] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:18:54] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:18:54] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:18:56] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:19:20] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/chat
[2026-02-17 20:19:20] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:19:20] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:19:20] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:19:20] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:19:20] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:19:20] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:19:21] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:19:23] GLOBAL ERROR: POST /api/v1/chat
name 'debug_log' is not defined
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 81, in collapse_excgroups
  |     yield
  |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 192, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                ~~~~~~~~~~~~~~~~~~~~~~~^^
  |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\anyio\_backends\_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  |         "unhandled errors in a TaskGroup", self._exceptions
  |     ) from None
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 211, in jwt_auth_middleware
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |                                    ~~~~~~~~~~~~~~~~~~^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    |     self.gen.throw(value)
    |     ~~~~~~~~~~~~~~^^^^^^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 76, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    |     raise app_exc from app_exc.__cause__ or app_exc.__context__
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    |     await self.app(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |     ...<3 lines>...
    |     )
    |     ^
    |   File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 140, in chat_endpoint
    |     debug_log(f"DEBUG CHAT: Running agent for user {current_user.id} with history len {len(history)}")
    |     ^^^^^^^^^
    | NameError: name 'debug_log' is not defined
    +------------------------------------

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 211, in jwt_auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 76, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 140, in chat_endpoint
    debug_log(f"DEBUG CHAT: Running agent for user {current_user.id} with history len {len(history)}")
    ^^^^^^^^^
NameError: name 'debug_log' is not defined

[2026-02-17 20:19:56] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:19:58] DEBUG AUTH: main.py loaded
[2026-02-17 20:20:20] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:20:20] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:20:20] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:20:20] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:20:20] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:20:24] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:20:26] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:20:26] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:20:26] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:20:26] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:20:26] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:20:29] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:20:29] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:20:29] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:20:29] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:20:29] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:20:30] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:20:31] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:20:31] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:20:31] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:20:34] DEBUG CHAT: Agent failed: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 91, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:20:34] GLOBAL ERROR: POST /api/v1/chat
Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1577, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 211, in jwt_auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 76, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 91, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:22:32] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:22:35] DEBUG AUTH: main.py loaded
[2026-02-17 20:22:43] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:22:46] DEBUG AUTH: main.py loaded
[2026-02-17 20:23:15] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:23:18] DEBUG AUTH: main.py loaded
[2026-02-17 20:24:43] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/tasks
[2026-02-17 20:24:43] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:24:43] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:24:43] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:24:43] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:24:43] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:24:43] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:24:47] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:24:49] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/users/me/tasks/stats
[2026-02-17 20:24:49] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:24:49] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:24:49] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:24:49] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:24:49] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:24:49] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:24:53] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:24:58] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:24:58] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:24:58] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:24:58] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:24:58] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:24:59] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:25:01] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:25:01] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:25:03] DEBUG CHAT: Agent failed: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 98, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:25:03] GLOBAL ERROR: POST /api/v1/chat
Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1577, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 211, in jwt_auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 76, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 98, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:29:19] DEBUG MIDDLEWARE: Request GET /health
[2026-02-17 20:29:19] DEBUG MIDDLEWARE: Skipping auth for /health
[2026-02-17 20:30:20] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:30:27] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:30:37] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:30:39] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:30:39] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:30:40] DEBUG AUTH: main.py loaded
[2026-02-17 20:31:28] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:31:28] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:31:28] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:31:28] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:31:28] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:31:33] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:31:34] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:31:34] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:31:34] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:31:34] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:31:34] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:31:40] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:31:48] DEBUG MIDDLEWARE: Request OPTIONS /api/v1/chat
[2026-02-17 20:31:48] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:31:49] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:31:49] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:31:49] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:31:49] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:31:49] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:31:50] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:31:51] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:31:51] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:31:53] DEBUG CHAT: Agent failed: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:31:54] GLOBAL ERROR: POST /api/v1/chat
Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1577, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 214, in jwt_auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 76, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:34:07] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:34:11] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:34:11] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:34:13] DEBUG AUTH: main.py loaded
[2026-02-17 20:34:25] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:34:28] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:34:28] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:34:29] DEBUG AUTH: main.py loaded
[2026-02-17 20:35:57] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:35:59] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:35:59] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:36:00] DEBUG AUTH: main.py loaded
[2026-02-17 20:36:37] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:36:39] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:36:39] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:36:39] DEBUG AUTH: main.py loaded
[2026-02-17 20:36:48] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:36:50] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:36:50] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:36:52] DEBUG AUTH: main.py loaded
[2026-02-17 20:37:20] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:37:23] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:37:23] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:37:24] DEBUG AUTH: main.py loaded
[2026-02-17 20:37:39] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:37:39] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:37:39] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:37:39] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:37:39] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:37:43] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:37:45] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:37:45] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:37:48] DEBUG CHAT: Agent failed: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:37:48] GLOBAL ERROR: POST /api/v1/chat
Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1577, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 214, in jwt_auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 60, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:38:04] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:38:04] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:38:04] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:38:04] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:38:04] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:38:06] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:38:06] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:38:06] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:38:08] DEBUG CHAT: Agent failed: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:38:08] GLOBAL ERROR: POST /api/v1/chat
Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1577, in request
    response.raise_for_status()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\httpx\_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 95, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\cors.py", line 153, in simple_response
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\middleware\auth.py", line 214, in jwt_auth_middleware
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    with recv_stream, send_stream, collapse_excgroups():
                                   ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 193, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\main.py", line 60, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 168, in call_next
    raise app_exc from app_exc.__cause__ or app_exc.__context__
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\base.py", line 144, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\middleware\exceptions.py", line 63, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 18, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 716, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 736, in app
    await route.handle(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\routing.py", line 290, in handle
    await self.app(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 121, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 107, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 426, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\fastapi\routing.py", line 314, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.AuthenticationError: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}

[2026-02-17 20:38:26] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:38:28] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:38:28] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:38:29] DEBUG AUTH: main.py loaded
[2026-02-17 20:40:46] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:40:48] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:40:48] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:40:49] DEBUG AUTH: main.py loaded
[2026-02-17 20:41:52] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:41:52] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:41:52] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:41:52] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:41:52] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:41:56] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:41:58] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:41:58] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:41:58] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:41:58] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:41:58] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:41:58] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:41:58] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:41:58] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:41:58] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:41:58] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:42:03] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:42:03] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:42:07] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:42:07] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:42:07] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:42:07] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:42:07] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:42:07] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:42:07] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:42:07] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:42:07] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:42:07] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:42:09] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:42:09] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:42:11] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:42:11] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:42:13] DEBUG CHAT: Auth failure: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
[2026-02-17 20:42:41] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:42:42] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 20:42:42] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 20:42:43] DEBUG AUTH: main.py loaded
[2026-02-17 20:48:18] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:48:20] DEBUG AGENT: Loaded API Key prefix: sk-4666...
[2026-02-17 20:48:20] DEBUG AGENT: Using Base URL: https://api.ccapi.ai/v1
[2026-02-17 20:48:21] DEBUG AUTH: main.py loaded
[2026-02-17 20:48:30] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 20:48:32] DEBUG AGENT: Loaded API Key prefix: sk-4666...
[2026-02-17 20:48:32] DEBUG AGENT: Using Base URL: https://api.ccapi.ai/v1
[2026-02-17 20:48:33] DEBUG AUTH: main.py loaded
[2026-02-17 20:49:04] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 20:49:04] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 20:49:04] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:49:04] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:49:04] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:49:08] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:49:10] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 20:49:10] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 20:49:10] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:49:10] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:49:10] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:49:14] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 20:49:14] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 20:49:14] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 20:49:14] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 20:49:14] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 20:49:14] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:49:15] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 20:49:16] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 20:49:16] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 20:49:18] DEBUG CHAT: Agent failed: Error code: 405
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 96, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.APIStatusError: Error code: 405

[2026-02-17 21:00:55] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:00:56] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:00:56] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:00:57] DEBUG AUTH: main.py loaded
[2026-02-17 21:01:07] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:01:08] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:01:08] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:01:09] DEBUG AUTH: main.py loaded
[2026-02-17 21:01:28] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 21:01:28] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 21:01:28] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:01:28] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:01:28] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:01:32] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:01:34] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 21:01:34] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 21:01:34] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:01:34] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:01:34] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:01:43] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:01:51] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 21:01:51] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 21:01:51] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:01:51] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:01:51] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:01:55] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:01:56] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 21:01:56] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 21:01:58] DEBUG CHAT: Agent failed: Error code: 404 - {'error': {'message': 'No endpoints found for google/gemini-2.0-flash-exp:free.', 'code': 404}, 'user_id': 'user_39KxYt2ElGjDolVIiMGMvOom4Oq'}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.NotFoundError: Error code: 404 - {'error': {'message': 'No endpoints found for google/gemini-2.0-flash-exp:free.', 'code': 404}, 'user_id': 'user_39KxYt2ElGjDolVIiMGMvOom4Oq'}

[2026-02-17 21:02:28] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:02:30] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:02:30] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:02:30] DEBUG AUTH: main.py loaded
[2026-02-17 21:03:07] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:03:09] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:03:09] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:03:09] DEBUG AUTH: main.py loaded
[2026-02-17 21:03:35] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:03:37] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:03:37] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:03:38] DEBUG AUTH: main.py loaded
[2026-02-17 21:03:53] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:03:56] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:03:56] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:03:57] DEBUG AUTH: main.py loaded
[2026-02-17 21:04:07] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 21:04:07] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 21:04:07] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:04:07] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:04:07] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:04:08] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 21:04:08] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 21:04:08] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:04:08] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:04:08] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:04:17] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:04:17] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:04:19] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 21:04:19] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 21:04:20] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 21:04:20] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 21:04:20] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:04:20] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:04:20] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:04:25] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:04:25] DEBUG CHAT: Agent failed: Error code: 429 - {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'meta-llama/llama-3.3-70b-instruct:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Venice', 'is_byok': False}}, 'user_id': 'user_39KxYt2ElGjDolVIiMGMvOom4Oq'}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'Provider returned error', 'code': 429, 'metadata': {'raw': 'meta-llama/llama-3.3-70b-instruct:free is temporarily rate-limited upstream. Please retry shortly, or add your own key to accumulate your rate limits: https://openrouter.ai/settings/integrations', 'provider_name': 'Venice', 'is_byok': False}}, 'user_id': 'user_39KxYt2ElGjDolVIiMGMvOom4Oq'}

[2026-02-17 21:08:26] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:08:28] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:08:28] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:08:29] DEBUG AUTH: main.py loaded
[2026-02-17 21:08:41] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:08:43] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:08:43] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:08:44] DEBUG AUTH: main.py loaded
[2026-02-17 21:11:03] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 21:11:03] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 21:11:03] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:11:03] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:11:03] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:11:13] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 21:11:13] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 21:11:13] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:11:13] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:11:13] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:11:27] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:11:39] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 21:11:39] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 21:11:39] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:11:39] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:11:39] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:11:43] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:11:55] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 21:11:55] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 21:11:58] DEBUG CHAT: Auth failure: Error code: 401 - {'error': {'message': 'User not found.', 'code': 401}}
[2026-02-17 21:12:00] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:12:55] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:12:57] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:12:57] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:12:57] DEBUG AUTH: main.py loaded
[2026-02-17 21:13:43] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:13:45] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:13:45] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:13:46] DEBUG AUTH: main.py loaded
[2026-02-17 21:14:18] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:14:19] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:14:19] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:14:20] DEBUG AUTH: main.py loaded
[2026-02-17 21:14:55] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:14:57] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:14:57] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:14:58] DEBUG AUTH: main.py loaded
[2026-02-17 21:15:04] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 21:15:04] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 21:15:04] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:15:04] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:15:04] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:15:08] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:15:10] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 21:15:10] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 21:15:10] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:15:10] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:15:10] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:15:14] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 21:15:14] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 21:15:14] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:15:14] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:15:14] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:15:15] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:15:16] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:15:17] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 21:15:17] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 21:15:19] DEBUG CHAT: Agent failed: Error code: 404 - {'error': {'message': 'No endpoints found matching your data policy (Free model publication). Configure: https://openrouter.ai/settings/privacy', 'code': 404}}
Traceback (most recent call last):
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\routes\chat.py", line 142, in chat_endpoint
    agent_result = await run_agent(current_user.id, history)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\itcourse\HACKATHON\Todo-App-main\Todo-App-main\backend\app\agent.py", line 100, in run_agent
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2678, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
    ...<49 lines>...
    )
    ^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\abs\AppData\Local\Python\pythoncore-3.14-64\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.NotFoundError: Error code: 404 - {'error': {'message': 'No endpoints found matching your data policy (Free model publication). Configure: https://openrouter.ai/settings/privacy', 'code': 404}}

[2026-02-17 21:19:14] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/36a0ace8-b796-42e6-932e-a9cdb872f0cc
[2026-02-17 21:19:14] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/36a0ace8-b796-42e6-932e-a9cdb872f0cc
[2026-02-17 21:19:14] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:19:14] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:19:14] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:19:20] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:19:20] DEBUG TASK: DELETE /tasks/36a0ace8-b796-42e6-932e-a9cdb872f0cc for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:19:46] DEBUG MIDDLEWARE: Request DELETE /api/v1/tasks/36a0ace8-b796-42e6-932e-a9cdb872f0cc
[2026-02-17 21:19:46] DEBUG MIDDLEWARE: Protected path /api/v1/tasks/36a0ace8-b796-42e6-932e-a9cdb872f0cc
[2026-02-17 21:19:46] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:19:46] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:19:46] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:19:53] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:19:53] DEBUG TASK: DELETE /tasks/36a0ace8-b796-42e6-932e-a9cdb872f0cc for user user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:19:54] DEBUG TASK: DELETE 404: Task 36a0ace8-b796-42e6-932e-a9cdb872f0cc NOT FOUND in database
[2026-02-17 21:20:03] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:20:06] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:20:06] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:20:07] DEBUG AUTH: main.py loaded
[2026-02-17 21:20:38] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:20:40] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:20:40] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:20:40] DEBUG AUTH: main.py loaded
[2026-02-17 21:25:52] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:25:55] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:25:55] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:25:55] DEBUG AUTH: main.py loaded
[2026-02-17 21:26:21] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:26:23] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:26:23] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:26:23] DEBUG AUTH: main.py loaded
[2026-02-17 21:26:50] DEBUG AUTH: Middleware initialized/reloaded
[2026-02-17 21:26:51] DEBUG AGENT: Loaded API Key prefix: sk-or-v...
[2026-02-17 21:26:51] DEBUG AGENT: Using Base URL: https://openrouter.ai/api/v1
[2026-02-17 21:26:52] DEBUG AUTH: main.py loaded
[2026-02-17 21:28:15] DEBUG MIDDLEWARE: Request GET /api/v1/tasks
[2026-02-17 21:28:15] DEBUG MIDDLEWARE: Protected path /api/v1/tasks
[2026-02-17 21:28:15] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:28:15] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:28:15] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:28:20] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:28:22] DEBUG MIDDLEWARE: Request POST /api/v1/chat
[2026-02-17 21:28:22] DEBUG MIDDLEWARE: Protected path /api/v1/chat
[2026-02-17 21:28:22] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:28:22] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:28:22] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:28:22] DEBUG MIDDLEWARE: Request GET /api/v1/users/me/tasks/stats
[2026-02-17 21:28:22] DEBUG MIDDLEWARE: Protected path /api/v1/users/me/tasks/stats
[2026-02-17 21:28:22] DEBUG AUTH: Received token credentials: eyJhbGciOi...
[2026-02-17 21:28:22] DEBUG AUTH: Successfully decoded claims using get_unverified_claims
[2026-02-17 21:28:22] DEBUG AUTH: Decoded token for user_id: user_39NyvTMSW5d1Yeo98ks5shJbNvH
[2026-02-17 21:28:27] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:28:27] DEBUG AUTH: Database lookup for user_39NyvTMSW5d1Yeo98ks5shJbNvH: Found
[2026-02-17 21:28:28] DEBUG CHAT: Running agent for user user_39NyvTMSW5d1Yeo98ks5shJbNvH with history len 9
[2026-02-17 21:28:28] DEBUG AGENT: Sending request to OpenAI (Turn 1)
[2026-02-17 21:28:34] DEBUG AGENT: Received response from OpenAI
[2026-02-17 21:28:34] DEBUG CHAT: Agent finished successfully
